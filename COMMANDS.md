# –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PDF Service

## üê≥ Docker –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–µ–∑ –ø—É—à–∞ –≤ registry)
make build-local

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up

# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
docker-compose logs -f pdf-service
docker-compose logs -f gotenberg
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–µ–ø–ª–æ—è

### –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞
```bash
# –°–±–æ—Ä–∫–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–µ—Ä—Å–∏–µ–π (–∏–∑ current_version.txt) –∏–ª–∏ –Ω–æ–≤–æ–π, –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
make build

# –°–±–æ—Ä–∫–∞ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π (–≤—Å–µ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ YY.MM.DD.HHMM)
make build-new

# –°–±–æ—Ä–∫–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
make build VERSION=1.2.3

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
make get-version
```

### –î–µ–ø–ª–æ–π –≤ –∫–ª–∞—Å—Ç–µ—Ä—ã
```bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–µ–ø–ª–æ—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Ä—Å–∏—é –∏–∑ current_version.txt)
make deploy ENV=test    # –¥–µ–ø–ª–æ–π –≤ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä
make deploy ENV=prod    # –¥–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–ª–∞—Å—Ç–µ—Ä

# –î–µ–ø–ª–æ–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
make deploy ENV=test VERSION=1.2.3
make deploy ENV=prod VERSION=1.2.3

# –ê–ª–∏–∞—Å—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
make deploy-test       # —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ make deploy ENV=test
make deploy-prod       # —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ make deploy ENV=prod

# –î–µ–ø–ª–æ–π –≤–æ –≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
make deploy-all       # –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π –≤ —Ç–µ—Å—Ç –∏ –ø—Ä–æ–¥ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
make deploy-all VERSION=1.2.3
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
make check-test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
make check-prod
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
–ü–æ—Å–ª–µ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–∞–π–ª–µ —à–∞–±–ª–æ–Ω–∞ `internal/domain/pdf/templates/template.docx` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å ConfigMap –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ:

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ
make update-template-test

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
make update-template-prod

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é:
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è CI/CD)
powershell -ExecutionPolicy Bypass -File scripts/update-template-unified.ps1 -Environment test -Force

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
powershell -ExecutionPolicy Bypass -File scripts/update-template-unified.ps1 -Environment test -SkipBackup

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
powershell -ExecutionPolicy Bypass -File scripts/update-template-unified.ps1 -Environment prod
```

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å —à–∞–±–ª–æ–Ω–∞–º–∏:
1. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –≤ –ø–∞–ø–∫–µ `backups/templates`
2. –í —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞:
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–≤
4. –®–∞–±–ª–æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ (`make deploy-test` –∏–ª–∏ `make deploy-prod`)
5. –í ConfigMap —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

## üìã –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# 1. –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
make build-new

# 2. –î–µ–ø–ª–æ–π –≤ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä
make deploy ENV=test

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ
make check-test

# 4. –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–µ, –¥–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
make deploy ENV=prod

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
make check-prod

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: –¥–µ–ø–ª–æ–π –≤–æ –≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã —Å—Ä–∞–∑—É
make deploy-all  # –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –≤ –ø—Ä–æ–¥
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Ä—Å–∏–∏
```bash
# –°–±–æ—Ä–∫–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
make build VERSION=1.2.3

# –î–µ–ø–ª–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
make deploy ENV=test VERSION=1.2.3  # –≤ —Ç–µ—Å—Ç
make deploy ENV=prod VERSION=1.2.3  # –≤ –ø—Ä–æ–¥
# –∏–ª–∏
make deploy-all VERSION=1.2.3       # –≤–æ –≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
```

## üîç Kubernetes –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–≤
kubectl get pods -n print-serv
kubectl get pods -n print-serv -l app=nas-pdf-service
kubectl get pods -n print-serv -l app=nas-gotenberg

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
kubectl get svc -n print-serv

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–æ–≤
kubectl get deploy -n print-serv

# –ü—Ä–æ–≤–µ—Ä–∫–∞ HPA
kubectl get hpa -n print-serv
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ pdf-service
kubectl logs -n print-serv -l app=nas-pdf-service -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ gotenberg
kubectl logs -n print-serv -l app=nas-gotenberg -f

# –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∞
kubectl describe pod -n print-serv -l app=nas-pdf-service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ConfigMap
kubectl get configmap -n print-serv nas-pdf-service-templates -o yaml
```

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –†—É—á–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
kubectl scale deployment -n print-serv nas-pdf-service --replicas=3
kubectl scale deployment -n print-serv nas-gotenberg --replicas=3
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø–æ–¥–æ–≤
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ pdf-service
kubectl rollout restart deployment -n print-serv nas-pdf-service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ gotenberg
kubectl rollout restart deployment -n print-serv nas-gotenberg
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–ª–∞—Å—Ç–µ—Ä–∞–º–∏
```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±
kubectl config use-context efgi-test    # –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä
kubectl config use-context efgi-prod    # –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–ª–∞—Å—Ç–µ—Ä

# –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–∏–∞—Å–æ–≤ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
ktest    # –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä
kprod    # –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–ª–∞—Å—Ç–µ—Ä

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
kubectl config current-context
```

## üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –∏–∑ JSON (–Ω–æ–≤—ã–π endpoint)
curl -X POST \
  -H "Content-Type: application/json" \
  --data-binary @test.json \
  http://localhost:8080/api/v1/docx \
  -o result.pdf

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –∏–∑ JSON (—Å—Ç–∞—Ä—ã–π endpoint, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
curl -X POST \
  -H "Content-Type: application/json" \
  --data-binary @test.json \
  http://localhost:8080/generate-pdf \
  -o result.pdf

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
curl http://localhost:8080/health
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus + Grafana)
make deploy-monitoring

# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
make deploy-prometheus  # —Ç–æ–ª—å–∫–æ Prometheus
make deploy-grafana    # —Ç–æ–ª—å–∫–æ Grafana
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Prometheus
make check-prometheus

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Grafana
make check-grafana
```

### –î–æ—Å—Ç—É–ø –∫ UI
```bash
# –î–æ—Å—Ç—É–ø –∫ Grafana UI (http://localhost:3000)
make port-forward-grafana

# –î–æ—Å—Ç—É–ø –∫ Prometheus UI (http://localhost:9090)
make port-forward-prometheus

# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: port-forward –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
# –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ port-forward –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ctrl+C
```

### –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–ø—Ä—è–º—É—é
curl http://localhost:8080/metrics

# –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
# - pdf_generation_total: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö PDF (–ø–æ —Å—Ç–∞—Ç—É—Å—É)
# - pdf_generation_duration_seconds: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF
# - pdf_file_size_bytes: —Ä–∞–∑–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# - gotenberg_requests_total: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gotenberg
# - gotenberg_request_duration_seconds: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gotenberg
# - http_requests_total: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
# - http_request_duration_seconds: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

# –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
# - docx_temp_file_creations_total: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# - docx_temp_file_errors_total: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏
# - docx_temp_files_current: —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# - docx_temp_file_age_seconds: –≤–æ–∑—Ä–∞—Å—Ç —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏
# - docx_temp_dir_size_bytes: —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
# - docx_temp_file_size_bytes: —Ä–∞–∑–º–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
# - docx_temp_memory_usage_bytes: —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
# - docx_temp_memory_limit_bytes: –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```

### Grafana
```bash
# –î–æ—Å—Ç—É–ø –∫ UI
make port-forward-grafana
# URL: http://localhost:3000
# –õ–æ–≥–∏–Ω: admin
# –ü–∞—Ä–æ–ª—å: admin (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–º–µ–Ω–∏—Ç—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ)
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

1. **NAS PDF Service Dashboard**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π PDF
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF (95-–π –∏ 50-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏)
   - –†–∞–∑–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Gotenberg

#### –ê–ª–µ—Ä—Ç—ã
Grafana –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π:
- –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ (>5% –∑–∞ 5 –º–∏–Ω—É—Ç)
- –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF (>30 —Å–µ–∫—É–Ω–¥)
- –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (>10MB)
- –ü—Ä–æ–±–ª–µ–º—ã —Å Gotenberg —Å–µ—Ä–≤–∏—Å–æ–º

### –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# 1. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
make deploy-monitoring

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
make check-prometheus
make check-grafana

# 3. –î–æ—Å—Ç—É–ø –∫ UI (–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö)
make port-forward-prometheus  # –¢–µ—Ä–º–∏–Ω–∞–ª 1
make port-forward-grafana    # –¢–µ—Ä–º–∏–Ω–∞–ª 2
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å—Ç–µ–∫–∞
make deploy-monitoring

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
make deploy-prometheus
make deploy-grafana
```

## ‚ùì –ü–æ–º–æ—â—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö make –∫–æ–º–∞–Ω–¥
```bash
make help
```

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `make deploy ENV=test|prod [VERSION=x.y.z]` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–µ–ø–ª–æ—è
- `make deploy-test` - –∞–ª–∏–∞—Å –¥–ª—è –¥–µ–ø–ª–æ—è –≤ —Ç–µ—Å—Ç
- `make deploy-prod` - –∞–ª–∏–∞—Å –¥–ª—è –¥–µ–ø–ª–æ—è –≤ –ø—Ä–æ–¥
- `make deploy-all` - –¥–µ–ø–ª–æ–π –≤–æ –≤—Å–µ –∫–ª–∞—Å—Ç–µ—Ä—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- `make build-new` - —Å–±–æ—Ä–∫–∞ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
- `make check-test|prod` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞
- `make update-template-test|prod` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `make help` 